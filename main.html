<!DOCTYPE html>
<html lang="en" >
<head><meta charset="utf-8">
<title>Domkol: HTML5 Complex Function Visualisation using Canvas and SVG</title>

<link rel="stylesheet" href="lib/jquery-ui-1.10.2.css" />
<script language="javascript" type="text/javascript" src="lib/jquery-1.9.1.js"></script>
<script language="javascript" type="text/javascript" src="lib/jquery-ui-1.10.2.js"></script>
<script language="javascript" type="text/javascript" src="domkol.js"></script>
<link rel="stylesheet" href="domkol.css" />

<!-- site.css.link.html -->

</head>

<body>

<!-- heading.wrapper.start.html -->
<h1 class="main">Domkol: HTML5 Complex Function Visualisation using Canvas and SVG</h1>
<!-- heading.wrapper.end.html -->

<div class="wideItem">
<div style="position:relative;height:560px;">
  <svg style="position:absolute;top:0;left:0;z-index:0;"
     width="560" height="560" viewbox="0 0 560 560">
     <g id="circle-graph-under">
       <path id="real-path-under" d="M0,0" fill="none" stroke="blue" stroke-width="5" stroke-opacity="1.0"/>
     </g>
  </svg>
  <svg style="position:absolute;top:0;left:0;z-index:1;"
     width="560" height="560" viewbox="0 0 560 560">
     <g id="coordinates">
       <g class="coordinates-group"></g>
       <path id="axes" d="M0,0" stroke="#909090" stroke-width="0.6"/>
       <path id="unit-coordinate-grid" d="M0,0" stroke="#909090" stroke-width="0.5"/>
       <path id="fine-coordinate-grid" d="M0,0" stroke="#909090" stroke-width="0.2"/>
     </g>
     <g id="circle-graph">
       <circle id="big-circle" cx="280" cy="280" r="150" stroke="white" stroke-width="7" fill="none"/>
       <path id="polar-grid" d="M0,0" fill="none" stroke="white" stroke-width="0.2"/>
       <path id="polar-grid-coarse" d="M0,0" fill="none" stroke="white" stroke-width="0.4"/>
       <path id="real-path" d="M0,0" fill="none" stroke="blue" stroke-width="5"/>
       <path id="real-path-shadow" d="M0,0" fill="none" stroke="#404040" stroke-width="5" stroke-opacity="0.08"/>
       <path id="real-path-shadow2" d="M0,0" fill="none" stroke="#404040" stroke-width="5" stroke-opacity="0.05"/>
       <path id="imaginary-path" d="M0,0" fill="none" stroke="#302010" stroke-width="5"/>
       <circle id="centre-handle" transform="translate(280 280)" 
               cx="0" cy="0" r="7" stroke="white" stroke-width="2" fill="black"/>
       <circle id="edge-handle" transform="translate(430 280)" 
               cx="0" cy="0" r="7" stroke="white" stroke-width="2" fill="black"/>
     </g>
  </svg>

  <div id="zero-handles">
     <div class="zero" style="position:absolute;left:282px;top:257px;z-index:2;">
        <div class="point-circle" style="position:absolute;left:-4px;top:21px"></div>
        <div class="zero-text">zero</div>
     </div>
     <div class="zero" style="position:absolute;left:282px;top:257px;z-index:2;">
        <div class="point-circle" style="position:absolute;left:-4px;top:21px"></div>
        <div class="zero-text">zero</div>
     </div>
     <div class="zero" style="position:absolute;left:282px;top:257px;z-index:2;">
        <div class="point-circle" style="position:absolute;left:-4px;top:21px"></div>
        <div class="zero-text">zero</div>
     </div>
  </div>
  
  <canvas id="domkol-canvas" style="position:absolute;top:0;left:0;z-index:0;"
        width="560" height="560"></canvas>

  <div class="worksBest" style="position:absolute;top:10px;left:600px;z-index:3;width:300px">
        <b>Domkol</b> works best on <b>Chrome/Chromium</b>. It can be used on other browsers,
        but bitmap drawing is <i>so</i> much slower on any non-Chrome/Chromium browser. 
        To make the UI more responsive in a browser with slow bitmap drawing, uncheck
        the "Repaint domain colouring continuously" checkbox. 
  </div>

  <div style="position:absolute;top:150px;left:480px;z-index:2;width:30em" class="controls">
    <div class="window-top-bar"></div>
  <table >
    <tr><td>Function:</td><td colspan="2"><span id="formula"></span></td></tr>
    <tr><td colspan="3">Drag the small black circles to move and resize the large circle.</td></tr>
    <tr><td colspan="3">Drag the blue numbers to change the zeroes of the cubic polynomial (initially
they are all located on the origin).</td></tr>
    <tr><td>&nbsp;</td></tr>
    <tr>
      <td>Graph scale:</td>
      <td>
        <div id="scale-slider" style="width:240px;"></div>
      </td>
      <td id="scale-value" style="width:5em;text-align:right"></td>
    </tr>
    <tr>
      <td>Colour scale:</td>
      <td>
        <div id="colour-scale-slider" style="width:240px;"></div>
      </td>
      <td id="colour-scale" style="width:5em;text-align:right"></td>
    </tr>
    <tr><td colspan="2">Show graph on circular domain:
            <input style="text-align:left" type="checkbox" id="show-circle-graph-checkbox" checked></input></td>
    </tr>
    <tr><td colspan="2">Show domain coordinate grid:
            <input style="text-align:left" type="checkbox" id="show-coordinate-grid-checkbox" checked></input></td>
    </tr>
    <tr><td colspan="2">Repaint domain colouring continuously:
            <input style="text-align:left" type="checkbox" id="repaint-continuously-checkbox" checked></input></td>
    </tr>
    <tr><td colspan="2">Show graph on circular domain in 3D:
      <input style="text-align:left" type="checkbox" id="show-3d-graph-checkbox" checked></input></td>
     </tr>
    <tr>
      <td>Rotate <b>f</b> values:</td>
      <td>
        <div id="rotate-graph-slider" style="width:240px;"></div>
      </td>
      <td id="graph-rotation" style="width:5em;text-align:right;font-size:0.8em"></td>
    </tr>
    <tr>
      <td>3D Viewpoint:</td>
      <td>
        <div id="viewpoint-slider" style="width:240px;"></div>
      </td>
    </tr>
    <tr><td colspan="2">3D Wiggle effect:
            <input style="text-align:left" type="checkbox" id="wiggle-checkbox" checked></input></td>
    <tr><td colspan="3" style="font-size:0.7em">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>(Note: press "c" to recentre any slider that currently has focus.)</i></td></tr>
  </table>
  </div>

</div>
</div>

<div class="article">
<h2>Explanation</h2>

<p><b>Domkol</b> is an HTML5/Javascript/SVG/Canvas/JQuery application which 
displays a complex function as a colouring of the complex plane (a technique
known as <b>domain colouring</b>), with additional interactivity to show values as a 
graph on a 1-dimensional subset of the domain (i.e. a 1-dimensional subset of the complex numbers
considered as a 2-dimensional Real number space). 
Initially the function <b>f(z) = z<sup>3</sup></b> is shown (but you can change the function by moving
the zeroes around with the mouse).</p>

<p>The 1-dimensional curve showing currently is a circle. (Other options, such as a straight line,
may eventually be added.)</p>

<p>The circle is controlled by two draggable handles: a centre handle that moves the circle
as a whole, and an edge handle that controls the radius of the circle. The values of <b>f</b>
for values of <b>z</b> on the circle are shown
in terms of distance from the centre of the circle, where <b>f = 0</b> is on the circumference itself,
positive is outside the circle and negative is inside the circle. 
Real is blue; imaginary is dark brown.
The scale of the mapping from the value of <b>f</b> to radius is controlled by the slider, which has
a logarithmic scale.</p>

<p>If the graph of <b>f</b> goes through
the centre, then the graph becomes ambiguous, and you should use the slider to reduce the scale factor.</p>

<p>A polar grid defines the scale of values for the real and imaginary components <b>f</b>, 
where the outer-most circle of the grid represents 1 and the inner-most circle represents -1 
(if it is visible, which depends on the domain circle size and the chosen scale factor for <b>f</b>).

</p>

<p>The "colour scale" specifies how the imaginary and real parts of <b>f</b> map to colour intensities.
When the scale value is <b>1.0</b>, a value of +1 or -1 maps to maximum colour intensity
(which with the current colour scheme corresponds to the colours black, green, red and yellow for 
1+i, -1+i, 1-i and -1-i respectively).</p>

<h3>3D View and the "Winding Number"</h3>

<p>Check the "Show graph on circular domain in 3D" checkbox to see a simple 3D view of the graph of 
the function <b>f</b> on the circular domain, where the imaginary value is represented by height above
the complex plane.</p>

<p>With this option you can verify that the "winding number" of a complex function around a circular path
is equal to the multiplicity of zeroes inside the circle (note: this theorem of complex analysis actually 
applies to <i>any</i> closed curve).</p>

<h3>F Value Rotation</h3>

<p><b>F value rotation</b> is an experimental feature that lets you rotate the values of <b>f</b>
in the complex plane. Although it looks a bit like the graph on the circular domain is rotating around
the origin, actually it is a rotation of the <b>f</b> values around the axis defined (locally) by the
circumference of the white domain circle.</p>

<h2>Issues and Browser Compatibility</h2>

<p>So far I have tested Domkol on the latest versions of various browsers, including:</p>

<ul>
 <li>In Linux (Ubuntu 12.10): Chromium, Chrome and Firefox. </li>
 <li>In Windows (Vista): Chrome, Firefox, Opera, Safari and Internet Explorer.</li>
</ul>

<p>I am using Chromium on Linux to develop the application, so at any particular time it is likely
to work most correctly on that browser.</p>

<p>Known issues are:</p>

<ul>
 <li><b>Performance:</b> There are some noticeable performance variations between 
browsers, especially when doing interactions which cause the coloured bitmap to be redrawn, 
i.e. changing the colour scale, or moving the function zeroes around.
In fact, the only browsers that give acceptable performance for redrawing the bitmap are Chrome and Chromium.
So for the moment, Domkol should be considered to be primarily a Chrome/Chromium application.
</li>
 <li><b>Touch screens:</b> The handles and slider do not (yet) work on a touch screen. I tried 
<a href="http://touchpunch.furf.com/">Touch Punch</a>, which worked for the slider, but not very well for
the draggable handles.</li>
</ul>

<p><b>TL;DR:</b> Domkol works best with Chrome or Chromium on a desktop with a mouse.</p>

<p>Last updated: 18 April 2013</p>
</div>

<!-- copyright.html -->

</body>
</html>
